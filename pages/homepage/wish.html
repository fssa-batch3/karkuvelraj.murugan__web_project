<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Wishlist Page</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="../../assets/css/wish.css">
    </head>

    <body>
        <div class="nav-container">
            <div class="nav-links">
                <ul>
                    <li>
                        <a href="../../index.html">Home</a>
                    </li>

                    <ul class="dropdown">
                        <li>
                            <a href="../product categories/men.html">Men</a> 
                        </li>

                    </ul>
                    <ul class="dropdown">
                        <li>
                            <a href="../product categories/women.html">Women</a> 
                        </li>
                    </ul>
                    <ul class="dropdown">
                        <li>
                            <a href="../product categories/kids.html">Kids</a> 
                        </li>

                        
                    </ul>

                    <li>
                        <a href="../homepage/about.html">About Us</a> 
                    </li>
                    <li>
                        <a href="../homepage/contact.html">Contact</a>
                    </li>
                  
                </ul>

            </div>

        </div>
        <section class="pack">

        </section>
<script>
      const wish_products = JSON.parse(localStorage.getItem("wish_details"));

      const all_products = JSON.parse(localStorage.getItem("product_details"));

      const user_id = JSON.parse(localStorage.getItem("userId"));

      const wish_value = wish_products.filter((e) => e.userid === user_id);

      const all_product = all_products.filter((e) =>
      wish_value.some((id) => e.unique_id === id.productid));



    console.log(all_product);
  
    
    for (let i = 0; i < all_product.length; i++) {
      div_card = document.createElement("section");
      div_card.setAttribute("class", "card-container");
    
      div_card0 = document.createElement("div");
      div_card0.setAttribute("class", "card");
      div_card.append(div_card0);
    
      div_card1 = document.createElement("div");
      div_card1.setAttribute("class", "card-content");
      div_card0.append(div_card1);
    
      h2 = document.createElement("h2");
      h2.setAttribute("id", "ak");
    //   h2.innerHTML = all_product[i].;
      div_card1.append(h2);

      a=document.createElement("a");
      a.setAttribute("href",`../products details/product.html?product_uniqueId=${all_product[i].unique_id}`);
      h2.append(a);

      img = document.createElement("img");
      img.setAttribute("src", all_product[i].image1);
      img.setAttribute("width", "150px");
      img.setAttribute("height", "150px");
      a.append(img);
      
    
      p1 = document.createElement("p");
      p1.setAttribute("id", "ak");
      p1.innerHTML = all_product[i].name;
      div_card1.append(p1);
    
      p2 = document.createElement("p");
      p2.setAttribute("class", "shirt-rate");
      p2.innerHTML = 'â‚¹'+ all_product[i].current_price;
      div_card1.append(p2);
    
      div_card2 = document.createElement("div");
      div_card2.setAttribute("class", "shoe-review");
      div_card1.append(div_card2);
    
    //   span = document.createElement("span");
    //   span.setAttribute("class", "fa fa-star-o");
    //   div_card2.append(span);

      btn = document.createElement("button");
      btn.setAttribute("class", "buy");
      btn.setAttribute("data-id", all_product[i].unique_id);
      btn.innerHTML = "REMOVE";
      div_card1.append(btn);
    
      document.querySelector(".pack").append(div_card);

    }
    const remove = document.querySelectorAll(".buy");
    remove.forEach(function (removeItem) {
      removeItem.addEventListener("click", function () {
        if (confirm("Delete")) {
          const get_id = this.dataset.id;

          const wish_details = JSON.parse(localStorage.getItem("wish_details"));
          const find_products = wish_details.find((e) => e.productid == get_id);
          const find_index = wish_details.indexOf(find_products);
          wish_details.splice(find_index, 1);
          localStorage.setItem("wish_details", JSON.stringify(wish_details));
          window.location.reload();
        }
      });
    });


   
</script>
    </body>

</html>